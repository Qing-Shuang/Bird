---
layout: default
tags: struts
title: Struts学习笔记1--基本概念
---

# Struts学习笔记1--基本概念 #

## Http ##

**Http协议原本不是为满足Web应用程序开发人员的需求而设计的。它是为请求和处理静态的Html文档而设计的**。如果要构建基于Http的web应用程序，必须要处理这个差异。

对于Web应用程序而言，需要跨越Http协议的两个障碍--**无状态和基于文本**。将基于文本的技术与强类型的技术（例如java）匹配起来引发了大量的数据绑定工作。Java Servlet API帮助缓解了一些痛苦。

## Java Servlet API ##

这个技术将Http公开给Java平台。这意味着java开发人员可以依据Http客户/服务端通信以直观的面向对象的抽象方式编写Http服务器代码。这个技术还提供了高级功能--**会话机制**。如果没有这个功能，我们只能自己处理Cookies，并且解析嵌入查询字符串中的会话关键字。

Servlet API中的核心对象是Servlet、请求（request）和响应（response）。**Servlet是一个单例的java对象，它全部的用途是接受请求，以及在任意的后端处理之后返回相应响应。**

实现了Servlet规范称为Servlet容器。可以是独立的实现（例如Apache Tomcat），也可以被集成到其他更大的应用程序服务器中。

Servlet规范把Web应用程序定义为“Servlet、Html页面、类以及其他资源的集合”。一个Servlet容器内可以包含一个或者多个Web应用程序。

Servlet是一种特殊的应用程序，被称为**托管生命周期的应用程序**(managed life cycle application)。

**Servlet不能做什么?**

* 请求参数数据绑定和数据验证。
	作为基于文本的协议，Http必须以文本编码的方式表示它的请求参数。当这些参数进入应用程序时，它们必须被转换为合适的本地数据类型。Servlet API并没有提供这个功能。从请求对象中取出的请求参数仍然以字符串的形式表示。

* 访问业务逻辑和数据层。

* 呈现表示层和国际化。

上述Servlet不能做的事情交由Web应用程序处理。

## Web应用程序框架 ##

Web应用程序框架是一种结构化的软件，**它提供了该领域常见任务**（例如数据从Http字符串转换为java数据类型、数据验证、从Web相关工作中分离出对业务和数据层调用、国际化、表示层内容呈现等）**的自动化实现，同时作为一个内置的架构解决方案可以被在其上实现的应用程序轻松地继承**。框架的结构来源于内建的接口、类对工作流的抽象。

## Struts2 框架 ##

###控制器--FilterDispatcher###

Struts中使用的MVC变体经常被称为是前端控制器（front controller）MVC。这意味着控制器在最前端，是请求处理过程中第一个被触发的组件。

这是一个Servlet过滤器，它检查每一个传入请求，决定哪个Struts2动作处理这个请求。

###模型--动作### 

模型是应用程序的内部状态。这个状态由数据模型和业务模型共同组成。宏观上看，数据和业务逻辑融合在一起构成了应用程序的整体状态。

（？）Struts2的动作组件有两个作用。首先，一个动作将业务逻辑调用封装到一个单独的工作单元中。其次，动作是一个数据传输的场所。

控制器在收到请求之后，必须通过映射来决定哪个动作处理这个请求。一旦找到了适当的动作，控制器会通过这个动作并将请求处理的控制权转交给它。

###视图--结果### 

将应用程序的状态转换为一种用户可以与之交互的可视化的表示。

Struts2为使用很多常见的表示层技术生成结果提供了原生的支持。这些表示层技术包括JSP、Velocity、FreeMarker以及XSLT等。

## Struts2 的工作原理 ##

(PS:还差一张图)

###拦截器### 
	
拦截器是一种可以在请求处理之前或之后执行的Struts2组件。它提供了一种在其中定义不同的工作流和横切任务的架构组件，以便能够简单地重用这些组件，并且能够与其他架构关注点分离。

###ValueStack和OGNL### 
	
Struts2使用ValueStack作为请求处理过程中所需的应用程序域数据的存储区域。数据被放入ValueStack为请求处理作准备。在动作执行过程中，数据在这里被操作。当结果呈现到相应页面时，数据从这里读取。

OGNL是一个用来引用、操作ValueStack中数据的强大的表达式语言（还不止于此）。
